{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar NodeCache = require(\"node-cache\");\n\nvar CacheService =\n/** @class */\nfunction () {\n  function CacheService(ttl) {\n    this.cache = new NodeCache({\n      stdTTL: ttl,\n      checkperiod: ttl * 0.2,\n      useClones: false\n    });\n  }\n\n  CacheService.prototype.get = function (key, fetchData) {\n    var _this = this;\n\n    var value = this.cache.get(key);\n\n    if (value) {\n      console.log(\"Fetching \" + key + \" data from cache...\");\n      return Promise.resolve(value);\n    }\n\n    if (!fetchData) {\n      return undefined;\n    }\n\n    return fetchData().then(function (result) {\n      console.log(\"Fetching \" + key + \" data from API...\");\n\n      _this.cache.set(key, result);\n\n      return result;\n    });\n  };\n\n  CacheService.prototype.del = function (keys) {\n    this.cache.del(keys);\n  };\n\n  CacheService.prototype.flush = function () {\n    this.cache.flushAll();\n  };\n\n  return CacheService;\n}();\n\nexports.default = CacheService;","map":{"version":3,"sources":["../../../src/utils/cache/cache.ts"],"names":[],"mappings":";;;;;;AAAA,IAAA,SAAA,GAAA,OAAA,CAAA,YAAA,CAAA;;AAEA,IAAA,YAAA;AAAA;AAAA,YAAA;AAGE,WAAA,YAAA,CAAY,GAAZ,EAAuB;AACrB,SAAK,KAAL,GAAa,IAAI,SAAJ,CAAc;AACzB,MAAA,MAAM,EAAE,GADiB;AAEzB,MAAA,WAAW,EAAE,GAAG,GAAG,GAFM;AAGzB,MAAA,SAAS,EAAE;AAHc,KAAd,CAAb;AAKD;;AAED,EAAA,YAAA,CAAA,SAAA,CAAA,GAAA,GAAA,UAAI,GAAJ,EAAiB,SAAjB,EAAoC;AAApC,QAAA,KAAA,GAAA,IAAA;;AACE,QAAM,KAAK,GAAG,KAAK,KAAL,CAAW,GAAX,CAAe,GAAf,CAAd;;AAEA,QAAI,KAAJ,EAAW;AACT,MAAA,OAAO,CAAC,GAAR,CAAY,cAAY,GAAZ,GAAe,qBAA3B;AACA,aAAO,OAAO,CAAC,OAAR,CAAgB,KAAhB,CAAP;AACD;;AAED,QAAI,CAAC,SAAL,EAAgB;AACd,aAAO,SAAP;AACD;;AAED,WAAO,SAAS,GAAG,IAAZ,CAAiB,UAAC,MAAD,EAAY;AAClC,MAAA,OAAO,CAAC,GAAR,CAAY,cAAY,GAAZ,GAAe,mBAA3B;;AACA,MAAA,KAAI,CAAC,KAAL,CAAW,GAAX,CAAe,GAAf,EAAoB,MAApB;;AACA,aAAO,MAAP;AACD,KAJM,CAAP;AAKD,GAjBD;;AAmBA,EAAA,YAAA,CAAA,SAAA,CAAA,GAAA,GAAA,UAAI,IAAJ,EAAkB;AAChB,SAAK,KAAL,CAAW,GAAX,CAAe,IAAf;AACD,GAFD;;AAIA,EAAA,YAAA,CAAA,SAAA,CAAA,KAAA,GAAA,YAAA;AACE,SAAK,KAAL,CAAW,QAAX;AACD,GAFD;;AAGF,SAAA,YAAA;AAAC,CArCD,EAAA;;AAuCA,OAAA,CAAA,OAAA,GAAe,YAAf","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar NodeCache = require(\"node-cache\");\nvar CacheService = /** @class */ (function () {\n    function CacheService(ttl) {\n        this.cache = new NodeCache({\n            stdTTL: ttl,\n            checkperiod: ttl * 0.2,\n            useClones: false,\n        });\n    }\n    CacheService.prototype.get = function (key, fetchData) {\n        var _this = this;\n        var value = this.cache.get(key);\n        if (value) {\n            console.log(\"Fetching \" + key + \" data from cache...\");\n            return Promise.resolve(value);\n        }\n        if (!fetchData) {\n            return undefined;\n        }\n        return fetchData().then(function (result) {\n            console.log(\"Fetching \" + key + \" data from API...\");\n            _this.cache.set(key, result);\n            return result;\n        });\n    };\n    CacheService.prototype.del = function (keys) {\n        this.cache.del(keys);\n    };\n    CacheService.prototype.flush = function () {\n        this.cache.flushAll();\n    };\n    return CacheService;\n}());\nexports.default = CacheService;\n//# sourceMappingURL=cache.js.map"]},"metadata":{},"sourceType":"script"}