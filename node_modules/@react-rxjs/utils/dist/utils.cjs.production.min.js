var H=Object.create;var O=Object.defineProperty;var J=Object.getOwnPropertyDescriptor;var Q=Object.getOwnPropertyNames;var X=Object.getPrototypeOf,Y=Object.prototype.hasOwnProperty;var g=e=>O(e,"__esModule",{value:!0});var Z=(e,s)=>{g(e);for(var r in s)O(e,r,{get:s[r],enumerable:!0})},_=(e,s,r)=>{if(s&&typeof s=="object"||typeof s=="function")for(let t of Q(s))!Y.call(e,t)&&t!=="default"&&O(e,t,{get:()=>s[t],enumerable:!(r=J(s,t))||r.enumerable});return e},i=e=>_(g(O(e!=null?H(X(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);Z(exports,{combineKeys:()=>h,contextBinder:()=>C,createKeyedSignal:()=>j,createListener:()=>$,createSignal:()=>K,mergeWithKey:()=>E,partitionByKey:()=>R,selfDependant:()=>D,suspend:()=>T,suspended:()=>B,switchMapSuspended:()=>U});var A=i(require("rxjs")),h=(e,s)=>new A.Observable(r=>{let t=new Map,n=new Set,o=new Map,a=!1,l=!0,m=()=>{if(!a){let p=Object.assign(new Map(o),{changes:n});n=new Set,l=!1,r.next(p)}},b=e.subscribe(p=>{a=!0;let f=new Set(p);t.forEach((c,u)=>{f.has(u)?f.delete(u):(c.unsubscribe(),t.delete(u),o.has(u)&&(n.add(u),o.delete(u)))}),f.forEach(c=>{t.set(c,s(c).subscribe(u=>{(!o.has(c)||o.get(c)!==u)&&(n.add(c),o.set(c,u),m())},u=>{r.error(u)}))}),a=!1,(n.size||l&&!f.size)&&m()},p=>{r.error(p)},()=>{r.complete()});return()=>{b.unsubscribe(),t.forEach(p=>{p.unsubscribe()})}});var x=i(require("rxjs"));function K(e=x.identity){let s=new x.Subject;return[s.asObservable(),(...r)=>s.next(e(...r))]}var w=i(require("rxjs"));function j(e,s){let r=new Map;return[t=>{let n=new w.Observable(o=>{r.has(t)||r.set(t,new Set);let a=r.get(t);return a.add(o),()=>{a.delete(o),a.size===0&&r.delete(t)}});return n.key=t,n},(...t)=>{var a;let n=s?s(...t):t.length===2?t[1]:t[0],o=e?e(n):t[0];(a=r.get(o))==null||a.forEach(l=>{l.next(n)})}]}var v=i(require("rxjs")),G=i(require("rxjs/operators")),E=(e,...s)=>(0,v.merge)(...Object.entries(e).map(([r,t])=>(0,v.from)(t).pipe((0,G.map)(n=>({type:r,payload:n})))).concat(s));var y=i(require("@react-rxjs/core")),d=i(require("rxjs")),M=i(require("rxjs/operators"));function R(e,s,r){let t=new d.Observable(n=>{let o=new Map,a=!1,l=!1,m=e.subscribe(b=>{let p=s(b);if(o.has(p))return o.get(p).source.next(b);let f=new d.Subject,c=(0,y.shareLatest)()((r||d.identity)(f,p));c.key=p;let u={source:f,observable:c,subscription:new d.Subscription};o.set(p,u),u.subscription=c.subscribe(d.noop,q=>n.error(q),()=>{o.delete(p),n.next(S(o)),o.size===0&&l&&n.complete()}),f.next(b),n.next(S(o)),a=!0},b=>{l=!0,o.size?o.forEach(p=>p.source.error(b)):n.error(b)},()=>{l=!0,o.size?o.forEach(b=>b.source.complete()):n.complete()});return a||n.next(S(o)),()=>{m.unsubscribe(),o.forEach(b=>{b.source.unsubscribe(),b.subscription.unsubscribe()})}}).pipe((0,y.shareLatest)());return[n=>ee(t,n),t.pipe((0,M.map)(n=>Array.from(n.keys())))]}function S(e){return new Map(Array.from(e.entries()).map(([s,r])=>[s,r.observable]))}var ee=(e,s)=>{let r=new d.Observable(t=>{let n,o=e.subscribe(a=>{var l;n=n||((l=a.get(s))==null?void 0:l.subscribe(t))},a=>{t.error(a)},()=>{t.complete()});return()=>{n==null||n.unsubscribe(),o.unsubscribe()}});return r.key=s,r};var P=i(require("rxjs")),V=i(require("@react-rxjs/core"));var k=i(require("rxjs")),I=e=>s=>new k.Observable(r=>{let t=!1,n=s.subscribe(o=>{t=!0,r.next(o)},o=>{r.error(o)},()=>{r.complete()});return t||r.next(e),n});var T=e=>I(V.SUSPENSE)((0,P.from)(e));var B=()=>T;var L=i(require("rxjs")),N=i(require("rxjs/operators"));var U=e=>(0,L.pipe)((0,N.switchMap)((s,r)=>T(e(s,r))));var F=i(require("rxjs")),z=i(require("rxjs/operators")),D=()=>{let e=new F.Subject;return[e.asObservable(),()=>(0,z.tap)(e)]};var W=i(require("@react-rxjs/core")),re=e=>e();function C(...e){let s=()=>e.map(re);return function(){let[r,t]=W.bind.apply(null,arguments);return[(...n)=>r(...s(),...n),t]}}function $(...e){return K(...e)}
//# sourceMappingURL=utils.cjs.production.min.js.map
